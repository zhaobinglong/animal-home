webpackJsonp([24],{XRZ1:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("6sKG"),a=o.n(r),s=o("2uFj"),l=o.n(s),i=(o("ZoQJ"),o("gyMJ")),n={data:function(){return{upload_url:l.a.base+"upload_tencent_cloud.php",form:{img:"",title:"",belong:"tianzhongda",img_arr:[],status:"1"}}},activated:function(){this.getDetail()},methods:{getDetail:function(){var t=this;if("add"==this.$route.params.id)return!1;var e=localStorage.getItem("role");Object(i.d)({id:this.$route.params.id,belong:e}).then(function(e){console.log(e),e[0].img_arr=[],e[0].img_arr.push({name:"",url:e[0].img}),t.form=e[0]})},onSubmit:function(){if(!this.form.img)return this.$message({message:"banner不能为空",type:"error"}),!1;var t=l.a.base+"wechat.php?ctrl=api&action=editBanner",e=this;a.a.post(t,this.form).then(function(t){console.log(t),e.$message({message:"编辑成功",type:"success"}),e.$router.back()})},onDel:function(){this.form.status=0,this.onSubmit()},topUploadSuccess:function(t,e,o){console.log(t),this.form.img=t.oss_url}}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"form-box"},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"图片"}},[o("el-col",[o("el-upload",{staticClass:"upload-demo",attrs:{"file-list":t.form.img_arr,action:t.upload_url,"on-success":t.topUploadSuccess,"list-type":"picture"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1)],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"简短描述"}},[o("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:t.onDel}},[t._v("删除")])],1)],1)],1)])},staticRenderFns:[]},c=o("C7Lr")(n,u,!1,null,null,null);e.default=c.exports}});