webpackJsonp([17],{EtZP:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o("6sKG");var n=o("gyMJ"),s=o("2uFj"),i=o.n(s),a={data:function(){return{form:{is_show:1},upload_url:i.a.base+"upload.php",api:i.a.base,inputVisible:!1,inputValue:""}},activated:function(){this.getList()},mounted:function(){},methods:{handleInputConfirm:function(){var e=this.inputValue;e&&(console.log(this.form),this.form.subCategory.push(e)),this.inputVisible=!1,this.inputValue=""},showInput:function(){this.inputVisible=!0},handleClose:function(e){this.form.subCategory.splice(this.form.subCategory.indexOf(e),1)},handleDel:function(){if(!this.form.name)return this.$message({message:"不能删除空的分类",type:"error"}),!1;this.form.status="0",this.onSubmit()},getList:function(){var e=this,t=localStorage.getItem("role");"add"==this.$route.params.id&&(this.form={name:"",subCategory:[],belong:t,is_show:"1"}),Object(n.h)({belong:t}).then(function(t){t.map(function(t){t.id==e.$route.params.id&&(e.form=t),console.log(t)})})},onSubmit:function(){var e=this;if(!this.form.name)return this.$message({message:"不能提交空的分类名字",type:"error"}),!1;Object(n.c)(this.form).then(function(t){e.$message({message:"编辑成功",type:"success"}),e.$router.back()})},topUploadSuccess:function(e,t,o){console.log(e),this.form.top_img=e.name},logoUploadSuccess:function(e,t,o){console.log(e),this.form.logo=e.name},handleRemove:function(e,t){}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",[e._v("首页")]),e._v(" "),o("el-breadcrumb-item",[e._v("分类管理")])],1)],1),e._v(" "),o("div",{staticClass:"form-box"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"一级分类"}},[o("el-col",[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"二级分类"}},[e._l(e.form.subCategory,function(t){return o("el-tag",{key:t,attrs:{closable:"","disable-transitions":!1},on:{close:function(o){return e.handleClose(t)}}},[e._v("\n                  "+e._s(t)+"\n                ")])}),e._v(" "),e.inputVisible?o("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):o("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("点击编辑")])],2),e._v(" "),o("el-form-item",{attrs:{label:"是否显示"}},[o("el-radio",{attrs:{label:"1"},model:{value:e.form.is_show,callback:function(t){e.$set(e.form,"is_show",t)},expression:"form.is_show"}},[e._v("显示")]),e._v(" "),o("el-radio",{attrs:{label:"0"},model:{value:e.form.is_show,callback:function(t){e.$set(e.form,"is_show",t)},expression:"form.is_show"}},[e._v("不显示")])],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]),e._v(" "),o("el-button",{attrs:{type:"text"},on:{click:e.handleDel}},[e._v("删除分类")])],1)],1)],1)])},staticRenderFns:[]};var r=o("C7Lr")(a,l,!1,function(e){o("SQmd")},null,null);t.default=r.exports},SQmd:function(e,t){}});