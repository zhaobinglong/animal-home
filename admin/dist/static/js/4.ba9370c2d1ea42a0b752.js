webpackJsonp([4],{RUR6:function(e,t,o){var s=o("Wtcz");s(s.S+s.F*!o("uoC7"),"Object",{defineProperty:o("hHwa").f})},RsNw:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("aA9S"),l=o.n(s),a=o("a3Yh"),r=o.n(a),n=o("6sKG"),i=o.n(n),c=o("2uFj"),m=o.n(c),u=(o("ZoQJ"),o("gyMJ")),f={data:function(){var e;return e={upload_url:m.a.base+"upload_tencent_cloud.php",colleges:[],college:"",users:[],user:"",form:{openid:"",title:"",address:"",cont:"",imgs:[],category:"学习交流",classify:"论坛",wechat:"",price:0,old_price:0,status:1,college:"西北政法大学",imgs_detail:[],symbol:"￥"},loading:!1,show_copy:!1},r()(e,"loading",!1),r()(e,"classify",[]),r()(e,"selectedOptions",[]),e},watch:{$route:function(){this.getDetail(),"add"==this.$route.params.id&&(this.show_copy=!1)}},created:function(){this.remoteClassify()},mounted:function(){},methods:{handleChange:function(e){console.log(e),this.form.classify=e[0],this.form.category=e[1]},openFullScreen:function(){var e=this.$loading({lock:!0,text:"正在上传",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){e.close()},2e3)},getDetail:function(){var e=this;Object(u.f)({id:this.$route.params.id}).then(function(t){console.log(t),t.img_arr=[],t.img_detail_arr=[],t.imgs.map(function(e,o){t.img_arr.push({index:o,name:"",url:e})}),t.imgs_detail&&t.imgs_detail.map(function(e,o){t.img_detail_arr.push({index:o,name:"",url:e})}),t.selectedOptions=[t.classify,t.category],1==t.status?t.status=!1:2==t.status?t.status=!0:t.status=!1,e.form=t}).catch(function(e){console.log(e)})},onSubmit:function(){var e=this;this.users.map(function(t,o){t.nickName==e.form.nickName&&(e.form.openid=t.openid)});var t=l()({},this.form);t.status=t.status?2:1;var o=m.a.base+"wechat.php?ctrl=api&action=push",s=this;i.a.post(o,t).then(function(e){console.log(e),200==e.data.res.code?s.$message({message:"编辑成功",type:"success"}):s.$message({message:e.data.msg,type:"success"})})},onCopy:function(){delete this.form.id;var e=m.a.base+"user.php?code=push",t=this;i.a.post(e,this.form).then(function(e){console.log(e),200==e.data.code&&t.$message({message:"复制成功",type:"success"})})},handleProgress:function(){this.openFullScreen()},topUploadSuccess:function(e,t,o){console.log(e);var s=e.oss_url;this.form.imgs||(this.form.imgs=[]),this.form.imgs.push(s)},handleRemove:function(e,t){console.log(e);var o=e.index;this.form.imgs.splice(o,1),console.log(this.form.imgs)},handleDetailRemove:function(e,t){var o=e.index;this.form.imgs_detail.splice(o,1),console.log(this.form.imgs)},remoteMethod:function(e){var t=this;console.log(e);var o=m.a.base+"user.php?code=searchSchool&name="+e;i.a.get(o).then(function(e){console.log(e),t.colleges=e.data})},remoteClassify:function(){var e=this;Object(u.h)().then(function(t){console.log(t);var o=t.map(function(e){var t=e.subCategory.map(function(e){return{value:e,label:e}});return{value:e.name,label:e.name,children:t}});console.log(o),e.classify=o})},remoteGetUser:function(e){var t=this,o=m.a.base+"user.php?code=searchUser&name="+e;i.a.get(o).then(function(e){console.log(e),t.users=e.data})},changeUser:function(e){console.log(e)}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"form-box"},[o("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"描述"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.cont,callback:function(t){e.$set(e.form,"cont",t)},expression:"form.cont"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"价格"}},[o("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"原始价格"}},[o("el-input",{model:{value:e.form.old_price,callback:function(t){e.$set(e.form,"old_price",t)},expression:"form.old_price"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"地址"}},[o("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"选择分类"}},[o("el-cascader",{attrs:{"expand-trigger":"hover",options:e.classify},on:{change:e.handleChange},model:{value:e.form.selectedOptions,callback:function(t){e.$set(e.form,"selectedOptions",t)},expression:"form.selectedOptions"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"选择大学"}},[o("el-select",{attrs:{value:e.form.college,filterable:"",remote:"","reserve-keyword":"",placeholder:e.form.college,"remote-method":e.remoteMethod,loading:e.loading},model:{value:e.form.college,callback:function(t){e.$set(e.form,"college",t)},expression:"form.college"}},e._l(e.colleges,function(e){return o("el-option",{key:e.sid,attrs:{label:e.uName,value:e.uName}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"选择用户"}},[o("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:e.form.nickName,"remote-method":e.remoteGetUser,loading:e.loading},model:{value:e.form.nickName,callback:function(t){e.$set(e.form,"nickName",t)},expression:"form.nickName"}},e._l(e.users,function(e){return o("el-option",{key:e.openid,attrs:{label:e.nickName,value:e.nickName}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"微信号码"}},[o("el-input",{model:{value:e.form.wechat,callback:function(t){e.$set(e.form,"wechat",t)},expression:"form.wechat"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"轮播图"}},[o("el-col",[o("el-upload",{staticClass:"upload-demo",attrs:{"file-list":e.form.img_arr,action:e.upload_url,"on-success":e.topUploadSuccess,"on-remove":e.handleRemove,"on-progress":e.handleProgress,"list-type":"picture"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"是否卖出"}},[o("el-checkbox",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("提交")])],1)],1)],1)])},staticRenderFns:[]},p=o("C7Lr")(f,d,!1,null,null,null);t.default=p.exports},a3Yh:function(e,t,o){"use strict";t.__esModule=!0;var s,l=o("liLe"),a=(s=l)&&s.__esModule?s:{default:s};t.default=function(e,t,o){return t in e?(0,a.default)(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},liLe:function(e,t,o){e.exports={default:o("zhwF"),__esModule:!0}},zhwF:function(e,t,o){o("RUR6");var s=o("ZuHZ").Object;e.exports=function(e,t,o){return s.defineProperty(e,t,o)}}});